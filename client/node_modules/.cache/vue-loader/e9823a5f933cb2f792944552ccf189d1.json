{"remainingRequest":"D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\src\\components\\User\\UpdateName.vue?vue&type=style&index=0&id=6e3e3dd8&lang=less&scoped=true","dependencies":[{"path":"D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\src\\components\\User\\UpdateName.vue","mtime":1640324930849},{"path":"D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\node_modules\\css-loader\\dist\\cjs.js","mtime":1639890174565},{"path":"D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1639890176118},{"path":"D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":1639890175296},{"path":"D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\node_modules\\less-loader\\dist\\cjs.js","mtime":1639890190084},{"path":"D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639890173991},{"path":"D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1639890175527}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouVXBkYXRlTmFtZXsNCiAgICBmb250LWZhbWlseTogUXVpY2tzYW5kOw0KICBzcGFuLmNvZGV7DQogICAgICBjb2xvcjogI2JkNDE0NzsNCiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjcsMzEsMzUsLjA1KTsNCiAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7DQogIH0NCn0NCg0K"},{"version":3,"sources":["D:\\DELL\\Desktop\\资源整合\\Webstudy\\13-vue3\\二次学习\\vue08\\client\\src\\components\\User\\UpdateName.vue"],"names":[],"mappings":";AAuFA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACpB;AACF","file":"D:/DELL/Desktop/资源整合/Webstudy/13-vue3/二次学习/vue08/client/src/components/User/UpdateName.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"UpdateName\">\r\n    <el-form\r\n         ref=\"userForm\"\r\n        :model=\"userForm\" \r\n        :rules=\"rules\" \r\n        status-icon\r\n        label-width=\"120px\"\r\n      >\r\n    <el-form-item label=\"当前用户名：\" >\r\n      <span class=\"code\">\r\n          {{userInfo.user}}\r\n        </span> \r\n    </el-form-item>\r\n    <el-form-item label=\"新用户名：\" prop=\"user\">\r\n      <el-input v-model=\"userForm.user\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-button type=\"primary\"  @click=\"submit('userForm')\" plain>确认修改</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState,mapMutations } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      userForm: {\r\n        user: \"\",\r\n      },\r\n      rules:{\r\n           user:[\r\n              {\r\n                  validator:(rule,value,cb)=>{\r\n                      //长度检验\r\n                      if(value.length<2 || value.length>8){\r\n                          cb(new Error(\"请输入2~8位的用户名\"))\r\n                      }\r\n                      //规则验证\r\n                      if(!/^[\\w\\u4e00-\\u9fa5\\u0800-\\u4e00\\uac00-\\ud7ff]+$/.test(value)){\r\n                          cb(new Error(\"只允许字母、数字、_、中/日/韩文\"))\r\n                      }\r\n                      //不能和原来的一样\r\n                      if(value === this.userInfo.user){\r\n                          cb(new Error(\"用户名没有变化😒\"))\r\n                      }\r\n                      cb()\r\n                  }\r\n              }\r\n          ],\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"userInfo\"]),\r\n  },\r\n  methods: {\r\n      ...mapMutations(['loginSuccess']),\r\n      submit(){\r\n          this.$refs['userForm'].validate(async v=>{\r\n              if(v){\r\n                  let {data} = await this.$axios({\r\n                      method:\"POST\",\r\n                      url:\"/personal/user\",\r\n                      data:{\r\n                          user:this.userForm.user\r\n                      }\r\n                  })\r\n                  //修改失败\r\n                  if(data.code){\r\n                      return this.$message.error(data.msg)\r\n                  }\r\n                  //修改成功\r\n                  this.$message.success(\"用户名修改成功\")//提示\r\n                  this.loginSuccess(data.data)//vuex更新\r\n                  this.$refs['userForm'].resetFields()//表单重置\r\n              }else{\r\n                  return false\r\n              }\r\n          })\r\n      }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.UpdateName{\r\n    font-family: Quicksand;\r\n  span.code{\r\n      color: #bd4147;\r\n      background-color: rgba(27,31,35,.05);\r\n      font-weight: 700;\r\n  }\r\n}\r\n\r\n</style>"]}]}