{"remainingRequest":"D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\src\\components\\Admin\\ArticleAdd.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\src\\components\\Admin\\ArticleAdd.vue","mtime":1657520581989},{"path":"D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\babel.config.js","mtime":1639895391688},{"path":"D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653658406323},{"path":"D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1653658408156},{"path":"D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653658406323},{"path":"D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1653658408462}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxERUxMXFxEZXNrdG9wXFxSZXNvdXJjZVxcV2Vic3R1ZHlcXDEzLXZ1ZTNcXFx1NEU4Q1x1NkIyMVx1NUI2Nlx1NEU2MFxcdnVlMDhcXFx1NjI1M1x1NTMwNVx1NEUwQVx1N0VCRlx1NzI0OFx1NjcyQ1xcdjEuMVxcY2xpZW50XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZG90LWFsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgZGVzOiAiIiwKICAgICAgICBtZDogIiIsCiAgICAgICAgY292ZXI6ICIiCiAgICAgIH0sCiAgICAgIGltYWdlVXJsOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMubWRGb3JtLnN1Ym1pdCgpOwogICAgfSwKICAgIC8v5paH56ug55qE5Y+R6KGoCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF95aWVsZCRfdGhpcyQkYXhpb3MsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICB1cmw6ICIvYWRtaW5TZXJ2ZXIvYXJ0aWNsZS9hZGQiLAogICAgICAgICAgICAgICAgICBkYXRhOiBfdGhpcy5mb3JtCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzJCRheGlvcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJF90aGlzJCRheGlvcy5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgICAgICAgICAgaWYgKCFkYXRhLmNvZGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF90aGlzLiRtZXNzYWdlLmVycm9yKGRhdGEubXNnKSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIC8v6Lez6L2s5Yiw5a+55bqU55qE5paH56ugCiAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi9hcnRpY2xlLyIuY29uY2F0KGRhdGEuZGF0YS5pZCkpOwoKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWPkeihqOaIkOWKnyIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/mt7vliqBtZOaWh+S7tueahOmSqeWtkAogICAgZmlsZUNoYW5nZTogZnVuY3Rpb24gZmlsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zb2xlLmxvZyhmaWxlKTsKICAgICAgaWYgKGZpbGUuc3RhdHVzICE9PSAicmVhZHkiKSByZXR1cm47IC8v566A5Y2V5Yik5pat5piv5ZCm5pivLm1k5paH5Lu2CgogICAgICB2YXIgcmVnID0gL14oLispXC5tZCQvOwoKICAgICAgaWYgKHJlZy50ZXN0KGZpbGUubmFtZSkpIHsKICAgICAgICAvL+W9k+ayoeaciei+k+WFpXRpdGxl55qE5pe25YCZIOiOt+WPluWQjeWtl+Whq+WFheWIsHRpdGxlCiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmZvcm0ubmFtZSk744CBCiAgICAgICAgLy/pgJrov4fljp/lrZDnu4Tov5vooYzljLnphY0g5Lik6ICF5piv5LiA6Ie055qE57uT5p6cCiAgICAgICAgLy9jb25zb2xlLmxvZyhmaWxlLm5hbWUubWF0Y2gocmVnKVsxXSk7CiAgICAgICAgLy9jb25zb2xlLmxvZyhSZWdFeHAuJDEpOwogICAgICAgIGlmICh0aGlzLmZvcm0udGl0bGUpIHJldHVybjsKICAgICAgICB0aGlzLmZvcm0udGl0bGUgPSBSZWdFeHAuJDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/mj5DnpLrlubbpmLvmraLmlofku7bmt7vliqAKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlj6rog73kuIrkvKAubWTmlofku7YiKTsKICAgICAgICBmaWxlTGlzdC5wb3AoKTsKICAgICAgfQogICAgfSwKICAgIC8v5Yig6ZmkbWTmlofku7bkuYvliY3mlofku7bnmoTpkqnlrZAKICAgIGJlZm9yZVJlbW92ZTogZnVuY3Rpb24gYmVmb3JlUmVtb3ZlKCkgewogICAgICB0aGlzLmZvcm0udGl0bGUgPSAiIjsKICAgIH0sCiAgICAvL21k5LiK5Lyg5oiQ5Yqf55qE6ZKp5a2Q5Ye95pWwCiAgICBtZF91cGxvYWRfc3VjY2VzczogZnVuY3Rpb24gbWRfdXBsb2FkX3N1Y2Nlc3MocmVzKSB7CiAgICAgIC8v5LiK5LygbWTlpLHotKUKICAgICAgaWYgKHJlcy5jb2RlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oG1k5aSx6LSl77yM6K+35qOA5p+l5ZCO56uv5oql6ZSZIik7CiAgICAgIH0gLy9tZOS4iuS8oOaIkOWKnwoKCiAgICAgIHRoaXMuZm9ybS5tZCA9IHJlcy51cmw7IC8v5Yik5pat5piv5ZCm5Y+I5bCB6Z2i5Zu+CgogICAgICBpZiAodGhpcy5pbWFnZVVybCkgewogICAgICAgIC8v5pyJ5bCB6Z2i5Zu+5bCx6Kem5Y+R5bCB6Z2i5Zu+55qE5LiK5LygCiAgICAgICAgdGhpcy4kcmVmcy5pbWdGb3JtLnN1Ym1pdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8v5rKh5pyJ5bCB6Z2i5Zu+IOebtOaOpeWPkeihqOaWh+eroAogICAgICAgIHRoaXMuc3VibWl0KCk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICB9LAogICAgLy/mt7vliqDlsIHpnaLnmoTpkqnlrZAKICAgIGNvdmVyQ2hhbmdlOiBmdW5jdGlvbiBjb3ZlckNoYW5nZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBpZiAoZmlsZS5zdGF0dXMgIT09ICJyZWFkeSIpIHJldHVybjsKICAgICAgdmFyIGlzSlBHID0gL15pbWFnZVwvKGpwZWd8cG5nKSQvLnRlc3QoZmlsZS5yYXcudHlwZSk7CiAgICAgIHZhciBpc0x0Mk0gPSBmaWxlLnJhdy5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWktOWDj+WbvueJh+WPquiDveS4ukpQR3xQTkfmoLzlvI8hIik7CiAgICAgIH0KCiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEiKTsKICAgICAgfQoKICAgICAgaWYgKGlzSlBHICYmIGlzTHQyTSkgewogICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUucmF3KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmltYWdlVXJsID0gIiAiOwogICAgICAgIGZpbGVMaXN0LnBvcCgpOwogICAgICB9CiAgICB9LAogICAgLy/lsIHpnaLkuIrkvKDmiJDlip8KICAgIGNvdmVyX3VwbG9hZF9zdWNjZXNzOiBmdW5jdGlvbiBjb3Zlcl91cGxvYWRfc3VjY2VzcyhyZXMpIHsKICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgIGlmIChyZXMuY29kZSkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLkuIrkvKDlsIHpnaLlpLHotKXvvIzor7fmo4Dmn6XlkI7nq6/lkI7ph43or5UiKTsKICAgICAgfQoKICAgICAgdGhpcy5mb3JtLmNvdmVyID0gcmVzLnVybDsKICAgICAgdGhpcy5zdWJtaXQoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["D:\\DELL\\Desktop\\Resource\\Webstudy\\13-vue3\\二次学习\\vue08\\打包上线版本\\v1.1\\client\\src\\components\\Admin\\ArticleAdd.vue"],"names":[],"mappings":"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","sourcesContent":["\n<template>\n  <div id=\"ArticleAdd\">\n    <el-form ref=\"form\" :model=\"form\" status-icon label-width=\"120px\">\n      <el-form-item label=\"标题：\">\n        <el-input\n          v-model=\"form.title\"\n          placeholder=\"可通过上传md自动获取文件名\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"描述：\">\n        <el-input v-model=\"form.des\" type=\"textarea\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"md上传：\">\n        <el-upload\n          class=\"upload-demo\"\n          :with-credentials=\"true\"\n          :limit=\"1\"\n          drag\n          :on-change=\"fileChange\"\n          :on-success=\"md_upload_success\"\n          :before-remove=\"beforeRemove\"\n          :action=\"`${baseURL}/adminServer/article/md`\"\n          :auto-upload=\"false\"\n          ref=\"mdForm\"\n        >\n          <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n          <div class=\"el-upload_text\">将文件拖到此处，或<em>点击上传</em></div>\n          <template #tip>\n            <div class=\"el-upload_tip\">只能上传 .md 文件</div>\n          </template>\n        </el-upload>\n      </el-form-item>\n      <el-form-item label=\"封面上传：\">\n        <el-upload\n          class=\"avatar-uploader\"\n          :with-credentials=\"true\"\n          :action=\"`${baseURL}/adminServer/article/cover`\"\n          :show-file-list=\"false\"\n          :auto-upload=\"false\"\n          :on-success=\"cover_upload_success\"\n          :on-change=\"coverChange\"\n          ref=\"imgForm\"\n        >\n          <div\n            v-if=\"imageUrl\"\n            class=\"avatar\"\n            :style=\"{ backgroundImage: `url(${imageUrl})` }\"\n          />\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\n          >确认发表</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      form: {\n        title: \"\",\n        des: \"\",\n        md: \"\",\n        cover: \"\",\n      },\n      imageUrl: \"\",\n    };\n  },\n  methods: {\n    submitForm() {\n     this.$refs.mdForm.submit()\n    },\n    //文章的发表\n    async submit(){\n      let {data} = await this.$axios({\n        method:\"POST\",\n        url:\"/adminServer/article/add\",\n        data:this.form\n      })\n      console.log(data);\n      if(data.code){\n        return this.$message.error(data.msg)\n      }\n      //跳转到对应的文章\n      this.$router.push(`/article/${data.data.id}`)\n      this.$message.success(\"发表成功\")\n    },\n    //添加md文件的钩子\n    fileChange(file, fileList) {\n      console.log(file);\n      if (file.status !== \"ready\") return;\n      //简单判断是否是.md文件\n      let reg = /^(.+)\\.md$/;\n      if (reg.test(file.name)) {\n        //当没有输入title的时候 获取名字填充到title\n        //console.log(this.form.name);、\n\n        //通过原子组进行匹配 两者是一致的结果\n        //console.log(file.name.match(reg)[1]);\n        //console.log(RegExp.$1);\n        if (this.form.title) return;\n        this.form.title = RegExp.$1;\n      } else {\n        //提示并阻止文件添加\n        this.$message.error(\"只能上传.md文件\");\n        fileList.pop();\n      }\n    },\n    //删除md文件之前文件的钩子\n    beforeRemove() {\n      this.form.title = \"\";\n    },\n    //md上传成功的钩子函数\n    md_upload_success(res){ \n      //上传md失败\n      if(res.code){   \n        return this.$message.error(\"上传md失败，请检查后端报错\")\n      }\n      //md上传成功\n      this.form.md = res.url\n      //判断是否又封面图\n      if(this.imageUrl){\n        //有封面图就触发封面图的上传\n        this.$refs.imgForm.submit()\n      }else{\n        //没有封面图 直接发表文章\n        this.submit()\n      }\n      console.log(res);\n    },\n    //添加封面的钩子\n    coverChange(file, fileList) {\n      if (file.status !== \"ready\") return;\n      const isJPG = /^image\\/(jpeg|png)$/.test(file.raw.type);\n      const isLt2M = file.raw.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能为JPG|PNG格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      if(isJPG && isLt2M){\n        this.imageUrl = URL.createObjectURL(file.raw);\n      }else{\n        this.imageUrl = \" \"\n        fileList.pop()\n      }\n    },\n    //封面上传成功\n    cover_upload_success(res){\n      console.log(res);\n      if(res.code){\n        return this.$message.error(\"上传封面失败，请检查后端后重试\")\n      }\n      this.form.cover = res.url\n      this.submit()\n    }\n  },\n};\n</script>\n\n<style lang='less' scoped>\n#ArticleAdd {\n  /deep/.el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n    margin-top: 10px;\n    .avatar-uploader-icon {\n      font-size: 28px;\n      color: #8c939d;\n      width: 178px;\n      height: 178px;\n      line-height: 178px;\n      text-align: center;\n    }\n  }\n  div.avatar {\n    display: block;\n    width: 178px;\n    height: 178px;\n    max-width: 178px;\n    max-height: 178px;\n    background: none center center/cover;\n  }\n}\n</style>"],"sourceRoot":""}]}